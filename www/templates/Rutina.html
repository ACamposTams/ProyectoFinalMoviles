<ion-view view-title="Rutina">
  <ion-content class="padding">
  <ion-refresher pulling-text="Baja para actualizar..." on-refresh="showData()">
        </ion-refresher>
    <div class="row responsive-sm">
        <div class="col"><div class="list card" ng-repeat="datosRutina in datosRutina">
          <div class="item item-text-wrap">
            <h2>{{datosRutina.nombreRutina}}</h2>
          </div>
          <div class="item item-body">
            <p>
                {{datosRutina.descripcion}}
            </p>
          </div>
          <div class="item item-text-wrap">
            <h2>Ejercicios</h2>
          </div>
          <div class="list" show-Delete = "data.showDelete" show-Reorder = "data.showReorder">
              <div class="item item-button-right item-text-wrap" ng-repeat="datosEjercicio in datosEjercicios" href="#/side/Ejercicio/{{datosEjercicio.id_ejercicio}}">
                  {{datosEjercicio.nombreEjercicio}}
                  <a class="button" href="#/side/EjercicioRutina/{{id_rutina}}/{{datosEjercicio.id_ejercicio}}">
                      <i class="icon ion-chevron-right"></i>
                  </a>
                  <p>{{datosEjercicio.especificacion}}</p>
              </div>
          </div>
          <a class="button button-balanced button-block" ng-if="showAdmin()" href ="#/side/ejerciciosNuevaRutina/{{id_rutina}}">Agregar Ejercicios a la Rutina</a>
          <a class="button button-royal button-block" ng-if="showAdmin()" href ="#/side/usuariosRutina/{{id_rutina}}">Asignar Rutina a un Usuario</a>
          <button class="button button-energized button-block" ng-if="showAdmin()" ng-click="editModal(datosRutina)">Editar Rutina</button>
          <button class="button button-assertive button-block" ng-if="showAdmin()" ng-click="delete(datosRutina)" ui-sref="sidemenu.rutinas">Eliminar Rutina</button>
      </div></div>
    </div>
  </ion-content>
</ion-view>
<script id="edit.html" type="text/ng-template">
        <div class="modal">
            <ion-header-bar class="bar-dark">
                <button class="button button-icon icon ion-ios-close-outline" ng-click="nulo()"></button>
                <h1 class="title"> Editar Rutina</h1>
            </ion-header-bar>
            <ion-content ng-repeat="datosRutina in datosRutina">
                <form>
                    <div class="list">
                        <label class="item item-input">
                        <span class="input-label">Nombre:</span>
                            <input type="text" ng-model="nombreRutina" init-from-form>
                        </label>
                        <label class="item item-input">
                        <span class="input-label">Descripcion:</span>
                            <input type="text" ng-model="descripcion" init-from-form>
                        </label>
                        <div class="list" show-Delete = "data.showDelete" show-Reorder = "data.showReorder">
                          <div class="item item-button-right" ng-repeat="datosEjercicio in datosEjercicios">
                  {{datosEjercicio.nombreEjercicio}}
                            <a class="button" ng-click="deleteExercise(datosEjercicio)">
                              <i class="icon ion-close"></i>
                            </a>
                          </div>
                        </div>
                        <button class="button button-balanced button-block" ng-click="edit({{datosRutina.id_rutina}},nombreRutina,descripcion);">
                            Guardar Rutina
                        </button>
                    </div>
                </form>
            </ion-content>
        </div>
</script>